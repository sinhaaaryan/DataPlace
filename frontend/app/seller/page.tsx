"use client"
import Card from "@/components/home/card";
import { DEPLOY_URL } from "@/lib/constants";
import { Github, Twitter } from "@/components/shared/icons";
import WebVitals from "@/components/home/web-vitals";
import ComponentGrid from "@/components/home/component-grid";
import Image from "next/image";
import { nFormatter } from "@/lib/utils";
import axios from "axios";
import useLocalStorage from "@/lib/hooks/use-local-storage";
import {Dialog, DialogTrigger} from "@radix-ui/react-dialog";
import { useEffect, useState } from 'react';

import {DialogContent, DialogDescription, DialogHeader, DialogTitle} from "@/components/ui/dialog";
const { ethers } = require("ethers");
const abi = require("../../abi.json")['abi'];


export default function Home() {
  const [orders, setOrders] = useState([]);
  const [signer] = useState([]);

  useEffect(() => {
    async function fetchOrders() {
      console.log(abi);

      const marketplace = "0x71C95911E9a5D330f4D621842EC243EE1343292e";
      const provider = new ethers.JsonRpcProvider("http://localhost:8545");
      const instance = new ethers.Contract(marketplace, abi, provider);

      const orders = await instance.getOrders();
      console.log('orders', orders);
      setOrders(orders);
    }
    fetchOrders();
  }, []);


  // const orderList = async () => {
  //     console.log(abi);

  //     const marketplace = "0x71C95911E9a5D330f4D621842EC243EE1343292e";
  //     const provider = new ethers.JsonRpcProvider("http://localhost:8545");
  //     const instance = new ethers.Contract(marketplace, abi, provider);

  //     const orders = await instance.getOrders();

  //     console.log("orders", orders);

  //     return orders;
  //   };

  const orderFulfill = async (orderId) => {
    const storedData = [{"interval":["2023-08-22T00:00:00.000000+01:00","2023-08-23T00:00:00.000000+01:00"],"activity_seconds":23844,"inactivity_seconds":62256,"vigorous_intensity_seconds":60,"BMR_calories":1495,"net_activity_calories":716,"total_burned_calories":2211,"distance_meters":14075,"steps":19914,"avg_hr_bpm":88.8148148148,"max_hr_bpm":120,"min_hr_bpm":62,"resting_hr_bpm":57,"avg_saturation_percentage":96.8846153846,"activity_stress_duration_seconds":24060,"avg_stress_level":66,"high_stress_duration_seconds":9420,"low_stress_duration_seconds":6660,"max_stress_level":96,"medium_stress_duration_seconds":15180,"rest_stress_duration_seconds":60,"stress_duration_seconds":31260},{"interval":["2023-08-23T00:00:00.000000+01:00","2023-08-24T00:00:00.000000+01:00"],"activity_seconds":24663,"inactivity_seconds":61737,"vigorous_intensity_seconds":240,"BMR_calories":1495,"net_activity_calories":1134,"total_burned_calories":2629,"distance_meters":14617,"steps":20709,"avg_hr_bpm":84.2677916361,"max_hr_bpm":142,"min_hr_bpm":51,"resting_hr_bpm":54,"avg_saturation_percentage":92.3,"activity_stress_duration_seconds":33660,"avg_stress_level":37,"high_stress_duration_seconds":12120,"low_stress_duration_seconds":1140,"max_stress_level":97,"medium_stress_duration_seconds":6480,"rest_stress_duration_seconds":28200,"stress_duration_seconds":19740},{"interval":["2023-08-24T00:00:00.000000+01:00","2023-08-25T00:00:00.000000+01:00"],"activity_seconds":14203,"inactivity_seconds":72197,"vigorous_intensity_seconds":1020,"BMR_calories":1495,"net_activity_calories":780,"total_burned_calories":2275,"distance_meters":14143,"steps":18696,"avg_hr_bpm":91.1820448878,"max_hr_bpm":178,"min_hr_bpm":59,"resting_hr_bpm":58,"avg_saturation_percentage":92.7875,"activity_stress_duration_seconds":15420,"avg_stress_level":66,"high_stress_duration_seconds":11160,"low_stress_duration_seconds":6960,"max_stress_level":97,"medium_stress_duration_seconds":8700,"rest_stress_duration_seconds":300,"stress_duration_seconds":26820},{"interval":["2023-08-25T00:00:00.000000+01:00","2023-08-26T00:00:00.000000+01:00"],"activity_seconds":21439,"inactivity_seconds":64961,"vigorous_intensity_seconds":1140,"BMR_calories":1260,"net_activity_calories":928,"total_burned_calories":2423,"distance_meters":17176,"steps":22637,"avg_hr_bpm":78.5789839944,"max_hr_bpm":162,"min_hr_bpm":49,"resting_hr_bpm":51,"avg_saturation_percentage":92.9653379549,"activity_stress_duration_seconds":21060,"avg_stress_level":38,"high_stress_duration_seconds":9600,"low_stress_duration_seconds":6780,"max_stress_level":99,"medium_stress_duration_seconds":11100,"rest_stress_duration_seconds":28020,"stress_duration_seconds":27480},{"interval":["2023-08-26T00:00:00.000000+03:00","2023-08-27T00:00:00.000000+03:00"],"activity_seconds":360,"inactivity_seconds":15240,"vigorous_intensity_seconds":60,"BMR_calories":269,"net_activity_calories":240,"total_burned_calories":269,"distance_meters":8,"steps":12,"avg_hr_bpm":63.25,"max_hr_bpm":97,"min_hr_bpm":55,"resting_hr_bpm":57,"avg_saturation_percentage":93.1437007874,"activity_stress_duration_seconds":420,"avg_stress_level":19,"high_stress_duration_seconds":60,"low_stress_duration_seconds":2460,"max_stress_level":78,"medium_stress_duration_seconds":540,"rest_stress_duration_seconds":10200,"stress_duration_seconds":3060},{"interval":["2023-08-27T00:00:00.000000+03:00","2023-08-28T00:00:00.000000+03:00"],"activity_seconds":11899,"inactivity_seconds":74501,"vigorous_intensity_seconds":1080,"BMR_calories":840,"net_activity_calories":1495,"total_burned_calories":448,"distance_meters":1943,"steps":7413,"avg_hr_bpm":72.2126582278,"max_hr_bpm":179,"min_hr_bpm":47,"resting_hr_bpm":48,"avg_saturation_percentage":94.2,"activity_stress_duration_seconds":10680,"avg_stress_level":10680,"high_stress_duration_seconds":32,"low_stress_duration_seconds":7620,"max_stress_level":96,"medium_stress_duration_seconds":13260,"rest_stress_duration_seconds":27600,"stress_duration_seconds":26280}]

    console.log("storedData", storedData);
    // const publicKey = 111;
    // const N = 1909;

    const marketplace = "0x71C95911E9a5D330f4D621842EC243EE1343292e";
    const provider = new ethers.JsonRpcProvider("http://localhost:8545");
    const instance = new ethers.Contract(marketplace, abi, provider);

    const order =  await instance.orders(orderId);
    const publicKey = order[6];
    const n = order[7];

    console.log("order to fill", order);

    const jsonString = JSON.stringify(storedData);
    const uint8Array = new TextEncoder().encode(jsonString);

    let hexString = '';
    uint8Array.forEach(byte => {
      hexString += byte.toString(16).padStart(2, '0');
    });

    // const byteData = await ethers.HexString("0x5b7b22696e74657276616c223a205b22323032332d30382d32325430303a30303a30302e3030303030302b30313a3030222c2022323032332d30382d32335430303a30303a30302e3030303030302b30313a3030225d2c202261637469766974795f7365636f6e6473223a2032333834342c2022696e61637469766974795f7365636f6e6473223a2036323235362c20227669676f726f75735f696e74656e736974795f7365636f6e6473223a2036302c2022424d525f63616c6f72696573223a20313439352c20226e65745f61637469766974795f63616c6f72696573223a203731362c2022746f74616c5f6275726e65645f63616c6f72696573223a20323231312c202264697374616e63655f6d6574657273223a2031343037352c20227374657073223a2031393931342c20226176675f68725f62706d223a2038382e383134383134383134382c20226d61785f68725f62706d223a203132302c20226d696e5f68725f62706d223a2036322c202272657374696e675f68725f62706d223a2035372c20226176675f73617475726174696f6e5f70657263656e74616765223a2039362e383834363135333834362c202261637469766974795f7374726573735f6475726174696f6e5f7365636f6e6473223a2032343036302c20226176675f7374726573735f6c6576656c223a2036362c2022686967685f7374726573735f6475726174696f6e5f7365636f6e6473223a20393432302c20226c6f775f7374726573735f6475726174696f6e5f7365636f6e6473223a20363636302c20226d61785f7374726573735f6c6576656c223a2039362c20226d656469756d5f7374726573735f6475726174696f6e5f7365636f6e6473223a2031353138302c2022726573745f7374726573735f6475726174696f6e5f7365636f6e6473223a2036302c20227374726573735f6475726174696f6e5f7365636f6e6473223a2033313236307d2c207b22696e74657276616c223a205b22323032332d30382d32335430303a30303a30302e3030303030302b30313a3030222c2022323032332d30382d32345430303a30303a30302e3030303030302b30313a3030225d2c202261637469766974795f7365636f6e6473223a2032343636332c2022696e61637469766974795f7365636f6e6473223a2036313733372c20227669676f726f75735f696e74656e736974795f7365636f6e6473223a203234302c2022424d525f63616c6f72696573223a20313439352c20226e65745f61637469766974795f63616c6f72696573223a20313133342c2022746f74616c5f6275726e65645f63616c6f72696573223a20323632392c202264697374616e63655f6d6574657273223a2031343631372c20227374657073223a2032303730392c20226176675f68725f62706d223a2038342e323637373931363336312c20226d61785f68725f62706d223a203134322c20226d696e5f68725f62706d223a2035312c202272657374696e675f68725f62706d223a2035342c20226176675f73617475726174696f6e5f70657263656e74616765223a2039322e332c202261637469766974795f7374726573735f6475726174696f6e5f7365636f6e6473223a2033333636302c20226176675f7374726573735f6c6576656c223a2033372c2022686967685f7374726573735f6475726174696f6e5f7365636f6e6473223a2031323132302c20226c6f775f7374726573735f6475726174696f6e5f7365636f6e6473223a20313134302c20226d61785f7374726573735f6c6576656c223a2039372c20226d656469756d5f7374726573735f6475726174696f6e5f7365636f6e6473223a20363438302c2022726573745f7374726573735f6475726174696f6e5f7365636f6e6473223a2032383230302c20227374726573735f6475726174696f6e5f7365636f6e6473223a2031393734307d2c207b22696e74657276616c223a205b22323032332d30382d32345430303a30303a30302e3030303030302b30313a3030222c2022323032332d30382d32355430303a30303a30302e3030303030302b30313a3030225d2c202261637469766974795f7365636f6e6473223a2031343230332c2022696e61637469766974795f7365636f6e6473223a2037323139372c20227669676f726f75735f696e74656e736974795f7365636f6e6473223a20313032302c2022424d525f63616c6f72696573223a20313439352c20226e65745f61637469766974795f63616c6f72696573223a203738302c2022746f74616c5f6275726e65645f63616c6f72696573223a20323237352c202264697374616e63655f6d6574657273223a2031343134332c20227374657073223a2031383639362c20226176675f68725f62706d223a2039312e313832303434383837382c20226d61785f68725f62706d223a203137382c20226d696e5f68725f62706d223a2035392c202272657374696e675f68725f62706d223a2035382c20226176675f73617475726174696f6e5f70657263656e74616765223a2039322e373837352c202261637469766974795f7374726573735f6475726174696f6e5f7365636f6e6473223a2031353432302c20226176675f7374726573735f6c6576656c223a2036362c2022686967685f7374726573735f6475726174696f6e5f7365636f6e6473223a2031313136302c20226c6f775f7374726573735f6475726174696f6e5f7365636f6e6473223a20363936302c20226d61785f7374726573735f6c6576656c223a2039372c20226d656469756d5f7374726573735f6475726174696f6e5f7365636f6e6473223a20383730302c2022726573745f7374726573735f6475726174696f6e5f7365636f6e6473223a203330302c20227374726573735f6475726174696f6e5f7365636f6e6473223a2032363832307d2c207b22696e74657276616c223a205b22323032332d30382d32355430303a30303a30302e3030303030302b30313a3030222c2022323032332d30382d32365430303a30303a30302e3030303030302b30313a3030225d2c202261637469766974795f7365636f6e6473223a2032313433392c2022696e61637469766974795f7365636f6e6473223a2036343936312c20227669676f726f75735f696e74656e736974795f7365636f6e6473223a20313134302c2022424d525f63616c6f72696573223a20313236302c20226e65745f61637469766974795f63616c6f72696573223a203932382c2022746f74616c5f6275726e65645f63616c6f72696573223a20323432332c202264697374616e63655f6d6574657273223a2031373137362c20227374657073223a2032323633372c20226176675f68725f62706d223a2037382e353738393833393934342c20226d61785f68725f62706d223a203136322c20226d696e5f68725f62706d223a2034392c202272657374696e675f68725f62706d223a2035312c20226176675f73617475726174696f6e5f70657263656e74616765223a2039322e393635333337393534392c202261637469766974795f7374726573735f6475726174696f6e5f7365636f6e6473223a2032313036302c20226176675f7374726573735f6c6576656c223a2033382c2022686967685f7374726573735f6475726174696f6e5f7365636f6e6473223a20393630302c20226c6f775f7374726573735f6475726174696f6e5f7365636f6e6473223a20363738302c20226d61785f7374726573735f6c6576656c223a2039392c20226d656469756d5f7374726573735f6475726174696f6e5f7365636f6e6473223a2031313130302c2022726573745f7374726573735f6475726174696f6e5f7365636f6e6473223a2032383032302c20227374726573735f6475726174696f6e5f7365636f6e6473223a2032373438307d2c207b22696e74657276616c223a205b22323032332d30382d32365430303a30303a30302e3030303030302b30333a3030222c2022323032332d30382d32375430303a30303a30302e3030303030302b30333a3030225d2c202261637469766974795f7365636f6e6473223a203336302c2022696e61637469766974795f7365636f6e6473223a2031353234302c20227669676f726f75735f696e74656e736974795f7365636f6e6473223a2036302c2022424d525f63616c6f72696573223a203236392c20226e65745f61637469766974795f63616c6f72696573223a203234302c2022746f74616c5f6275726e65645f63616c6f72696573223a203236392c202264697374616e63655f6d6574657273223a20382c20227374657073223a2031322c20226176675f68725f62706d223a2036332e32352c20226d61785f68725f62706d223a2039372c20226d696e5f68725f62706d223a2035352c202272657374696e675f68725f62706d223a2035372c20226176675f73617475726174696f6e5f70657263656e74616765223a2039332e313433373030373837342c202261637469766974795f7374726573735f6475726174696f6e5f7365636f6e6473223a203432302c20226176675f7374726573735f6c6576656c223a2031392c2022686967685f7374726573735f6475726174696f6e5f7365636f6e6473223a2036302c20226c6f775f7374726573735f6475726174696f6e5f7365636f6e6473223a20323436302c20226d61785f7374726573735f6c6576656c223a2037382c20226d656469756d5f7374726573735f6475726174696f6e5f7365636f6e6473223a203534302c2022726573745f7374726573735f6475726174696f6e5f7365636f6e6473223a2031303230302c20227374726573735f6475726174696f6e5f7365636f6e6473223a20333036307d2c207b22696e74657276616c223a205b22323032332d30382d32375430303a30303a30302e3030303030302b30333a3030222c2022323032332d30382d32385430303a30303a30302e3030303030302b30333a3030225d2c202261637469766974795f7365636f6e6473223a2031313839392c2022696e61637469766974795f7365636f6e6473223a2037343530312c20227669676f726f75735f696e74656e736974795f7365636f6e6473223a20313038302c2022424d525f63616c6f72696573223a203834302c20226e65745f61637469766974795f63616c6f72696573223a20313439352c2022746f74616c5f6275726e65645f63616c6f72696573223a203434382c202264697374616e63655f6d6574657273223a20313934332c20227374657073223a20373431332c20226176675f68725f62706d223a2037322e323132363538323237382c20226d61785f68725f62706d223a203137392c20226d696e5f68725f62706d223a2034372c202272657374696e675f68725f62706d223a2034382c20226176675f73617475726174696f6e5f70657263656e74616765223a2039342e322c202261637469766974795f7374726573735f6475726174696f6e5f7365636f6e6473223a2031303638302c20226176675f7374726573735f6c6576656c223a2031303638302c2022686967685f7374726573735f6475726174696f6e5f7365636f6e6473223a2033322c20226c6f775f7374726573735f6475726174696f6e5f7365636f6e6473223a20373632302c20226d61785f7374726573735f6c6576656c223a2039362c20226d656469756d5f7374726573735f6475726174696f6e5f7365636f6e6473223a2031333236302c2022726573745f7374726573735f6475726174696f6e5f7365636f6e6473223a2032373630302c20227374726573735f6475726174696f6e5f7365636f6e6473223a2032363238307d5d");

    let byteData = "0x5b7b22696e74657276616c223a205b22323032332d30382d32325430303a30303a30302e3030303030302b30313a3030222c2022323032332d30382d32335430303a30303a30302e3030303030302b30313a3030225d2c202261637469766974795f7365636f6e6473223a2032333834342c2022696e61637469766974795f7365636f6e6473223a2036323235362c20227669676f726f75735f696e74656e736974795f7365636f6e6473223a2036302c2022424d525f63616c6f72696573223a20313439352c20226e65745f61637469766974795f63616c6f72696573223a203731362c2022746f74616c5f6275726e65645f63616c6f72696573223a20323231312c202264697374616e63655f6d6574657273223a2031343037352c20227374657073223a2031393931342c20226176675f68725f62706d223a2038382e383134383134383134382c20226d61785f68725f62706d223a203132302c20226d696e5f68725f62706d223a2036322c202272657374696e675f68725f62706d223a2035372c20226176675f73617475726174696f6e5f70657263656e74616765223a2039362e383834363135333834362c202261637469766974795f7374726573735f6475726174696f6e5f7365636f6e6473223a2032343036302c20226176675f7374726573735f6c6576656c223a2036362c2022686967685f7374726573735f6475726174696f6e5f7365636f6e6473223a20393432302c20226c6f775f7374726573735f6475726174696f6e5f7365636f6e6473223a20363636302c20226d61785f7374726573735f6c6576656c223a2039362c20226d656469756d5f7374726573735f6475726174696f6e5f7365636f6e6473223a2031353138302c2022726573745f7374726573735f6475726174696f6e5f7365636f6e6473223a2036302c20227374726573735f6475726174696f6e5f7365636f6e6473223a2033313236307d2c207b22696e74657276616c223a205b22323032332d30382d32335430303a30303a30302e3030303030302b30313a3030222c2022323032332d30382d32345430303a30303a30302e3030303030302b30313a3030225d2c202261637469766974795f7365636f6e6473223a2032343636332c2022696e61637469766974795f7365636f6e6473223a2036313733372c20227669676f726f75735f696e74656e736974795f7365636f6e6473223a203234302c2022424d525f63616c6f72696573223a20313439352c20226e65745f61637469766974795f63616c6f72696573223a20313133342c2022746f74616c5f6275726e65645f63616c6f72696573223a20323632392c202264697374616e63655f6d6574657273223a2031343631372c20227374657073223a2032303730392c20226176675f68725f62706d223a2038342e323637373931363336312c20226d61785f68725f62706d223a203134322c20226d696e5f68725f62706d223a2035312c202272657374696e675f68725f62706d223a2035342c20226176675f73617475726174696f6e5f70657263656e74616765223a2039322e332c202261637469766974795f7374726573735f6475726174696f6e5f7365636f6e6473223a2033333636302c20226176675f7374726573735f6c6576656c223a2033372c2022686967685f7374726573735f6475726174696f6e5f7365636f6e6473223a2031323132302c20226c6f775f7374726573735f6475726174696f6e5f7365636f6e6473223a20313134302c20226d61785f7374726573735f6c6576656c223a2039372c20226d656469756d5f7374726573735f6475726174696f6e5f7365636f6e6473223a20363438302c2022726573745f7374726573735f6475726174696f6e5f7365636f6e6473223a2032383230302c20227374726573735f6475726174696f6e5f7365636f6e6473223a2031393734307d2c207b22696e74657276616c223a205b22323032332d30382d32345430303a30303a30302e3030303030302b30313a3030222c2022323032332d30382d32355430303a30303a30302e3030303030302b30313a3030225d2c202261637469766974795f7365636f6e6473223a2031343230332c2022696e61637469766974795f7365636f6e6473223a2037323139372c20227669676f726f75735f696e74656e736974795f7365636f6e6473223a20313032302c2022424d525f63616c6f72696573223a20313439352c20226e65745f61637469766974795f63616c6f72696573223a203738302c2022746f74616c5f6275726e65645f63616c6f72696573223a20323237352c202264697374616e63655f6d6574657273223a2031343134332c20227374657073223a2031383639362c20226176675f68725f62706d223a2039312e313832303434383837382c20226d61785f68725f62706d223a203137382c20226d696e5f68725f62706d223a2035392c202272657374696e675f68725f62706d223a2035382c20226176675f73617475726174696f6e5f70657263656e74616765223a2039322e373837352c202261637469766974795f7374726573735f6475726174696f6e5f7365636f6e6473223a2031353432302c20226176675f7374726573735f6c6576656c223a2036362c2022686967685f7374726573735f6475726174696f6e5f7365636f6e6473223a2031313136302c20226c6f775f7374726573735f6475726174696f6e5f7365636f6e6473223a20363936302c20226d61785f7374726573735f6c6576656c223a2039372c20226d656469756d5f7374726573735f6475726174696f6e5f7365636f6e6473223a20383730302c2022726573745f7374726573735f6475726174696f6e5f7365636f6e6473223a203330302c20227374726573735f6475726174696f6e5f7365636f6e6473223a2032363832307d2c207b22696e74657276616c223a205b22323032332d30382d32355430303a30303a30302e3030303030302b30313a3030222c2022323032332d30382d32365430303a30303a30302e3030303030302b30313a3030225d2c202261637469766974795f7365636f6e6473223a2032313433392c2022696e61637469766974795f7365636f6e6473223a2036343936312c20227669676f726f75735f696e74656e736974795f7365636f6e6473223a20313134302c2022424d525f63616c6f72696573223a20313236302c20226e65745f61637469766974795f63616c6f72696573223a203932382c2022746f74616c5f6275726e65645f63616c6f72696573223a20323432332c202264697374616e63655f6d6574657273223a2031373137362c20227374657073223a2032323633372c20226176675f68725f62706d223a2037382e353738393833393934342c20226d61785f68725f62706d223a203136322c20226d696e5f68725f62706d223a2034392c202272657374696e675f68725f62706d223a2035312c20226176675f73617475726174696f6e5f70657263656e74616765223a2039322e393635333337393534392c202261637469766974795f7374726573735f6475726174696f6e5f7365636f6e6473223a2032313036302c20226176675f7374726573735f6c6576656c223a2033382c2022686967685f7374726573735f6475726174696f6e5f7365636f6e6473223a20393630302c20226c6f775f7374726573735f6475726174696f6e5f7365636f6e6473223a20363738302c20226d61785f7374726573735f6c6576656c223a2039392c20226d656469756d5f7374726573735f6475726174696f6e5f7365636f6e6473223a2031313130302c2022726573745f7374726573735f6475726174696f6e5f7365636f6e6473223a2032383032302c20227374726573735f6475726174696f6e5f7365636f6e6473223a2032373438307d2c207b22696e74657276616c223a205b22323032332d30382d32365430303a30303a30302e3030303030302b30333a3030222c2022323032332d30382d32375430303a30303a30302e3030303030302b30333a3030225d2c202261637469766974795f7365636f6e6473223a203336302c2022696e61637469766974795f7365636f6e6473223a2031353234302c20227669676f726f75735f696e74656e736974795f7365636f6e6473223a2036302c2022424d525f63616c6f72696573223a203236392c20226e65745f61637469766974795f63616c6f72696573223a203234302c2022746f74616c5f6275726e65645f63616c6f72696573223a203236392c202264697374616e63655f6d6574657273223a20382c20227374657073223a2031322c20226176675f68725f62706d223a2036332e32352c20226d61785f68725f62706d223a2039372c20226d696e5f68725f62706d223a2035352c202272657374696e675f68725f62706d223a2035372c20226176675f73617475726174696f6e5f70657263656e74616765223a2039332e313433373030373837342c202261637469766974795f7374726573735f6475726174696f6e5f7365636f6e6473223a203432302c20226176675f7374726573735f6c6576656c223a2031392c2022686967685f7374726573735f6475726174696f6e5f7365636f6e6473223a2036302c20226c6f775f7374726573735f6475726174696f6e5f7365636f6e6473223a20323436302c20226d61785f7374726573735f6c6576656c223a2037382c20226d656469756d5f7374726573735f6475726174696f6e5f7365636f6e6473223a203534302c2022726573745f7374726573735f6475726174696f6e5f7365636f6e6473223a2031303230302c20227374726573735f6475726174696f6e5f7365636f6e6473223a20333036307d2c207b22696e74657276616c223a205b22323032332d30382d32375430303a30303a30302e3030303030302b30333a3030222c2022323032332d30382d32385430303a30303a30302e3030303030302b30333a3030225d2c202261637469766974795f7365636f6e6473223a2031313839392c2022696e61637469766974795f7365636f6e6473223a2037343530312c20227669676f726f75735f696e74656e736974795f7365636f6e6473223a20313038302c2022424d525f63616c6f72696573223a203834302c20226e65745f61637469766974795f63616c6f72696573223a20313439352c2022746f74616c5f6275726e65645f63616c6f72696573223a203434382c202264697374616e63655f6d6574657273223a20313934332c20227374657073223a20373431332c20226176675f68725f62706d223a2037322e323132363538323237382c20226d61785f68725f62706d223a203137392c20226d696e5f68725f62706d223a2034372c202272657374696e675f68725f62706d223a2034382c20226176675f73617475726174696f6e5f70657263656e74616765223a2039342e322c202261637469766974795f7374726573735f6475726174696f6e5f7365636f6e6473223a2031303638302c20226176675f7374726573735f6c6576656c223a2031303638302c2022686967685f7374726573735f6475726174696f6e5f7365636f6e6473223a2033322c20226c6f775f7374726573735f6475726174696f6e5f7365636f6e6473223a20373632302c20226d61785f7374726573735f6c6576656c223a2039362c20226d656469756d5f7374726573735f6475726174696f6e5f7365636f6e6473223a2031333236302c2022726573745f7374726573735f6475726174696f6e5f7365636f6e6473223a2032373630302c20227374726573735f6475726174696f6e5f7365636f6e6473223a2032363238307d5d";
    console.log('bytes', byteData);

    // byteData = "0x5b";
    const encryptedData = await instance.encryptBytes(byteData, publicKey, n);

    console.log("encryptedData", encryptedData);

    console.log("signer", this.signer);
    const tx = await this.signer.data.sendTransaction({
      "to": marketplace,
      "value": 0
    });

    console.log("tx", tx);


  }
  const handleButtonClick = async () => {
    // retrieve the user_id from local storage

    const user_id = localStorage.getItem('user_id')!.replace(/['"]+/g, '')
    
    console.log("button clicked");
    console.log("Before calling getData",user_id!.replace(/['"]+/g, ''));

    try {
      const response = await axios.get("http://localhost:3000/api/getData", {
        params: { user_id }, // Pass the user_id as a parameter to the API request
      });
  
      const data = response.data; // Access the data from the response
  
      console.log("Data from getData", data);
    } catch (error) {
      console.error("Error fetching data:", error);
    }
  };

  return (
    <>
    <div className="z-10 w-full max-w-xl px-5 xl:px-0">
      {/* <a
        href="https://twitter.com/steventey/status/1613928948915920896"
        target="_blank"
        rel="noreferrer"
        className="mx-auto mb-5 flex max-w-fit animate-fade-up items-center justify-center space-x-2 overflow-hidden rounded-full bg-blue-100 px-7 py-2 transition-colors hover:bg-blue-200"
      >
        <Twitter className="h-5 w-5 text-[#1d9bf0]" />
        <p className="text-sm font-semibold text-[#1d9bf0]">
          Introducing Precedent
        </p>
      </a> */}
      <h1
        className="animate-fade-up bg-gradient-to-br from-black to-stone-500 bg-clip-text text-center font-display text-4xl font-bold tracking-[-0.02em] text-transparent opacity-0 drop-shadow-sm [text-wrap:balance] md:text-7xl md:leading-[5rem]"
        style={{ animationDelay: "0.15s", animationFillMode: "forwards" }}
      >
        DataPlace
      </h1>
      <p
        className="mt-6 animate-fade-up text-center text-gray-500 opacity-0 [text-wrap:balance] md:text-xl"
        style={{ animationDelay: "0.25s", animationFillMode: "forwards" }}
      >
        A marketplace for your data
      </p>
      <div
        className="mx-auto mt-6 flex animate-fade-up items-center justify-center space-x-5 opacity-0"
        style={{ animationDelay: "0.3s", animationFillMode: "forwards" }}
      >

        <Dialog>
          <DialogTrigger className = "text-black">
            Data preferences
          </DialogTrigger>
          <DialogContent>
            <DialogHeader>
              <DialogTitle>Select your preferences</DialogTitle>
              <DialogDescription>
                Which data would you like to share?
              </DialogDescription>
              <div className="flex gap-2 item-center">
                <input type="checkbox" id="c1"/>
                <label htmlFor="c1"> Athlete Data</label>
                <input type="checkbox" id="c2"/>
                <label htmlFor="c2"> Sleep Data</label>
              </div>
            </DialogHeader>
          </DialogContent>


        </Dialog>
        {/* <a
          className="group flex max-w-fit items-center justify-center space-x-2 rounded-full border border-black bg-black px-5 py-2 text-sm text-white transition-colors hover:bg-white hover:text-black"
          href={DEPLOY_URL}
          target="_blank"
          rel="noopener noreferrer"
        >
          <svg
            className="h-4 w-4 group-hover:text-black"
            viewBox="0 0 24 24"
            fill="currentColor"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M12 4L20 20H4L12 4Z"
              stroke="currentColor"
              strokeWidth="2"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
          </svg>
          <p>Deploy to Vercel</p>
        </a> */}
        {/* <a
          className="flex max-w-fit items-center justify-center space-x-2 rounded-full border border-gray-300 bg-white px-5 py-2 text-sm text-gray-600 shadow-md transition-colors hover:border-gray-800"
          href="https://github.com/steven-tey/precedent"
          target="_blank"
          rel="noopener noreferrer"
        >
          <Github />
          <p>
            <span className="hidden sm:inline-block">Star on</span> GitHub{" "}
            <span className="font-semibold">{nFormatter(stars)}</span>
          </p>
        </a> */}
      </div>
      <div>
      <tbody>
        {orders.map((order, index) => (
          <tr key={order}>
            <td>Data type: {order[5]} </td>

            <td>Price: {ethers.formatEther(order[4])}</td>

            <td><button onClick={() => orderFulfill(index)}>sell</button></td>

            {/* <td>{event.returnValues.someProperty}</td> Replace with your event's property */}
          </tr>
        ))}
      </tbody>
    </div>
    </div>
    {/* <div className="my-10 grid w-full max-w-screen-xl animate-fade-up grid-cols-1 gap-5 px-5 md:grid-cols-3 xl:px-0">
      {features.map(({ title, description, demo, large }) => (
        <Card
          key={title}
          title={title}
          description={description}
          demo={
            title === "Beautiful, reusable components" ? (
              <ComponentGrid />
            ) : (
              demo
            )
          }
          large={large}
        />
      ))}
    </div> */}

  </>
);
}
